name: Verify Docker Image

on:
  workflow_run:
    workflows: ["Build and Publish Docker Image"]
    types:
      - completed

  workflow_dispatch:
    inputs:
      tag:
        description: "Docker Image tag as generated by the build action, preceded by ':' (e.g. ':latest')"
        required: true
        default: ":latest"

jobs:
  verify:
    runs-on: ubuntu-latest
    container:
      image: ghcr.io/lobis/root-geant4-garfield${{ github.event.inputs.tag }}

    steps:
      - name: Check environment is loaded correctly
        run: |
          root-config --version
          geant4-config --version

